plugins {
    id "application"
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

configurations {
    platformLib
}

dependencies {
    implementation project(":UIAPlatform")
    testImplementation("junit:junit:4.13")

    platformLib project(":UIAPlatform") // used to determine the ext dir where the UIAPlatform.jar is located

    implementation "org.asciidoctor:asciidoctorj:2.5.1"
}

import org.gradle.internal.jvm.Jvm
def getJreExtDir() {
    Jvm.current().jre.toPath().resolve('lib/ext')
}
def getPlatformExtPath() {
    configurations.platformLib.files[0].parent
}

task runWithPlatform(type: JavaExec) {
	group = 'application'
	description = 'Runs the sample with the glass platfrom configured'
	classpath = sourceSets.main.runtimeClasspath
	main = 'uia.sample.Simple'
	systemProperty "java.ext.dirs", "${getJreExtDir()};${getPlatformExtPath()}"
    systemProperty "glass.platform", "UIA"
    systemProperty "glass.accessible.force", true
}