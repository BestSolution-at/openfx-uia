plugins {
    id "java-library"
    id "org.sonarqube" version "3.2.0"
}

sonarqube {
    properties {
        property "sonar.projectName", "JavaFX Glass Platfrom with full UIA support"
        property "sonar.projectKey", "openfx-uia"
        property "sonar.excludes", "src/main/java/com/sun/glass/ui/uia/glass/**"
    }
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

java {
    withSourcesJar()
    withJavadocJar();
}

javadoc {
    exclude 'com/sun/glass/ui/uia/**'
}

import java.nio.file.Paths
compileJava {
    options.fork = true
    options.forkOptions.executable =  Paths.get(System.getenv("JDK8FX")).resolve("bin/javac").toString()
}

configurations {
    debugDll
}

dependencies {
    debugDll project(path: ":UIAPlatform.native", configuration: "debugRuntimeElements")
    testImplementation("junit:junit:4.13")
}

jar {
    dependsOn configurations.debugDll
    from configurations.debugDll.files
}
